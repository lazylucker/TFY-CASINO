characters = {
    "Шоха": [
        {"name": "Отлежаться как босс", "desc": "10 минут ничего не делать"},
        {"name": "Проспать важный момент", "desc": "Не заходить в бота 3 часа"},
        {"name": "Резкая поездка", "desc": "Ответить на сообщение за 10 секунд"},
        {"name": "Чилл на хате", "desc": "Отправить смайлик"},
        {"name": "Тупо афк", "desc": "Игнорировать бота 1 час"}
    ],
    "TBG": [
        {"name": "Открыть третий глаз", "desc": "Угадать цвет (красный, синий, зелёный)"},
        {"name": "Путешествие во времени", "desc": "Отправить сообщение ровно в указанное время"},
        {"name": "Медитация", "desc": "Не заходить в бота 24 часа"},
        {"name": "Случайные знаки", "desc": "Ответить на случайное сообщение"},
        {"name": "Аура", "desc": "Выбрать слово, которое ассоциируется с тобой"}
    ]
}

def assign_quest(user):
    import random
    quest = random.choice(characters[user.character])
    return quest["name"]
characters = {
    "Шоха": [
        {"name": "Отлежаться как босс", "desc": "10 минут ничего не делать"},
        {"name": "Проспать важный момент", "desc": "Не заходить в бота 3 часа"},
        {"name": "Резкая поездка", "desc": "Ответить на сообщение за 10 секунд"},
        {"name": "Чилл на хате", "desc": "Отправить смайлик"},
        {"name": "Тупо афк", "desc": "Игнорировать бота 1 час"},
        {"name": "Лежачий режим", "desc": "Не отвечать на сообщения в течение 2 часов"},
        {"name": "Медитация", "desc": "Игнорировать бота на 1 день"},
        {"name": "Мастер сна", "desc": "Просто усни, не заходя в бот 3 часа"},
        {"name": "Прокачка флоу", "desc": "Ответить на 5 сообщений подряд"},
        {"name": "Ленивая буря", "desc": "Игнорировать бота 30 минут, потом быстро ответить"}
    ],
    "TBG": [
        {"name": "Открыть третий глаз", "desc": "Угадать цвет (красный, синий, зелёный)"},
        {"name": "Путешествие во времени", "desc": "Отправить сообщение ровно в указанное время"},
        {"name": "Медитация", "desc": "Не заходить в бота 24 часа"},
        {"name": "Случайные знаки", "desc": "Ответить на случайное сообщение"},
        {"name": "Аура", "desc": "Выбрать слово, которое ассоциируется с тобой"},
        {"name": "Время тумана", "desc": "Отправить сообщение ночью"},
        {"name": "Шум времени", "desc": "Не заходить в бота 12 часов, затем дать правильный ответ"},
        {"name": "Тайный портал", "desc": "Отправить случайную фразу из трех слов"},
        {"name": "Знаки судьбы", "desc": "Ответить на случайное сообщение за 5 минут"},
        {"name": "Безмолвие", "desc": "Игнорировать бота 4 часа"}
    ]
}
def complete_quest(user, quest_name):
    quest_history = QuestHistory(user_id=user.id, quest_name=quest_name)
    session.add(quest_history)
    session.commit()

    # Увеличиваем счетчик завершенных квестов
    user.completed_quests += 1
    session.commit()

    # Проверяем, даёт ли выполнение квеста доступ в казино
    if user.completed_quests >= 3:
        user.has_access_to_casino = True
        session.commit()

